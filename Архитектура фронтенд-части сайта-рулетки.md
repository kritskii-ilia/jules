# Архитектура фронтенд-части сайта-рулетки

## 1. Технологический стек

Для разработки фронтенд-части сайта-рулетки выбраны следующие технологии:

- **Основной фреймворк**: React.js
- **Сборщик**: Vite (для быстрой разработки и оптимизированной сборки)
- **Управление состоянием**: React Context API + React Query (для кэширования и управления запросами к API)
- **Роутинг**: React Router
- **Стилизация**: CSS Modules + SCSS (для модульности и переиспользования стилей)
- **UI-библиотека**: Собственные компоненты с минимальным использованием готовых решений
- **Анимации**: React Spring (для плавных анимаций, особенно для карусели в рулетке)
- **WebSocket**: Socket.io-client (для реализации чата и обновлений в реальном времени)
- **Форматирование кода**: ESLint + Prettier
- **Типизация**: TypeScript (для улучшения разработки и предотвращения ошибок)

## 2. Структура проекта

```
frontend/
├── public/                 # Статические файлы
│   ├── favicon.ico
│   └── ...
├── src/
│   ├── assets/             # Изображения, шрифты и другие ресурсы
│   ├── components/         # Переиспользуемые компоненты
│   │   ├── common/         # Общие компоненты (кнопки, инпуты, модальные окна)
│   │   ├── features/       # Компоненты для конкретных функций (чат, игровые элементы)
│   │   └── layout/         # Компоненты макета (хедер, футер, сайдбар)
│   ├── contexts/           # React контексты для управления состоянием
│   ├── hooks/              # Пользовательские хуки
│   ├── layouts/            # Макеты страниц
│   ├── pages/              # Компоненты страниц
│   ├── services/           # Сервисы для работы с API
│   ├── styles/             # Глобальные стили и переменные
│   ├── types/              # TypeScript типы и интерфейсы
│   ├── utils/              # Вспомогательные функции
│   ├── App.tsx             # Корневой компонент приложения
│   ├── main.tsx            # Точка входа
│   └── ...
├── .eslintrc.js            # Конфигурация ESLint
├── .prettierrc             # Конфигурация Prettier
├── index.html              # HTML шаблон
├── package.json            # Зависимости и скрипты
├── tsconfig.json           # Конфигурация TypeScript
└── vite.config.ts          # Конфигурация Vite
```

## 3. Основные компоненты

### 3.1. Общие компоненты (common)

- **Button**: Кнопка с различными вариантами стилей (primary, secondary, danger)
- **Input**: Поле ввода с валидацией
- **Modal**: Модальное окно для различных диалогов
- **Tooltip**: Всплывающие подсказки
- **Spinner**: Индикатор загрузки
- **Badge**: Метка для отображения статусов
- **Card**: Карточка для группировки контента
- **Tabs**: Вкладки для переключения между разделами

### 3.2. Компоненты функций (features)

- **Chat**: Компонент чата с поддержкой смайликов
- **GameTimer**: Таймер обратного отсчета для игровых режимов
- **PlayerList**: Список игроков с аватарами и ставками
- **BetInput**: Специализированный компонент для ввода ставок
- **WinnerCarousel**: Карусель для визуализации выбора победителя
- **ProvablyFairInfo**: Компонент для отображения информации о Provably Fair
- **LotteryGrid**: Сетка для режима "Лотерея"
- **AuctionBidder**: Компонент для режима "Аукцион"

### 3.3. Компоненты макета (layout)

- **Header**: Верхняя панель с логотипом, навигацией и информацией о пользователе
- **Footer**: Нижняя панель с информацией о сайте и ссылками
- **Sidebar**: Боковая панель (если потребуется)
- **Navigation**: Компонент навигации

## 4. Страницы

- **HomePage**: Главная страница с обзором игровых режимов
- **LoginPage**: Страница авторизации через Telegram
- **RegisterPage**: Страница регистрации (если потребуется отдельно от авторизации)
- **ProfilePage**: Страница профиля пользователя
- **ClassicGamePage**: Страница для режима "Классическая Рулетка" (с выбором комнаты)
- **AuctionPage**: Страница для режима "Аукцион"
- **LotteryPage**: Страница для режима "Лотерея"
- **AdminPage**: Страница административной панели (если требуется фронтенд для нее)

## 5. Управление состоянием

### 5.1. Глобальное состояние (React Context)

- **AuthContext**: Управление состоянием авторизации пользователя
- **UserContext**: Информация о текущем пользователе (баланс, профиль)
- **GameContext**: Состояние текущих игровых режимов
- **ChatContext**: Состояние чата

### 5.2. Локальное состояние

- Использование хуков useState и useReducer для управления локальным состоянием компонентов
- Использование React Query для кэширования и управления данными от API

## 6. Взаимодействие с API

### 6.1. Сервисы

- **apiService**: Базовый сервис для работы с API
- **authService**: Сервис для авторизации и регистрации
- **userService**: Сервис для работы с данными пользователя
- **gameService**: Сервис для взаимодействия с игровыми режимами
- **chatService**: Сервис для работы с чатом
- **adminService**: Сервис для административных функций

### 6.2. WebSocket

- Использование Socket.io для реализации чата и обновлений в реальном времени
- Обработка событий игровых режимов (новые ставки, таймер, результаты)

## 7. Стилизация и темы

### 7.1. Цветовая палитра

- **Основные цвета**: 
  - Черный (#121212) - основной фон
  - Темно-зеленый (#0A3622) - акцентный цвет для элементов интерфейса
  - Средне-зеленый (#0D5C3A) - для кнопок и активных элементов
  - Светло-зеленый (#14A76C) - для выделения и акцентов
  - Темно-серый (#1E1E1E) - для карточек и контейнеров
  - Серый (#333333) - для второстепенных элементов
  - Светло-серый (#AAAAAA) - для текста и границ

### 7.2. Типографика

- **Основной шрифт**: Roboto или Inter (без засечек, хорошо читаемый)
- **Заголовки**: Более жирное начертание основного шрифта
- **Размеры шрифта**: 
  - Основной текст: 16px
  - Заголовки: от 18px до 32px
  - Мелкий текст: 14px

### 7.3. Анимации и переходы

- Плавные переходы между состояниями (hover, active, focus)
- Анимации для карусели выбора победителя
- Анимации для таймера обратного отсчета
- Анимации для уведомлений и модальных окон

## 8. Адаптивность

Хотя мобильная адаптация не является приоритетом на начальном этапе, архитектура будет спроектирована с учетом возможности добавления адаптивности в будущем:

- Использование относительных единиц измерения (rem, em, %)
- Применение медиа-запросов для основных точек перелома
- Flexbox и Grid для гибкого расположения элементов

## 9. Производительность

- Ленивая загрузка компонентов страниц (React.lazy)
- Оптимизация рендеринга с использованием React.memo и useCallback
- Минимизация ререндеров с помощью правильной структуры компонентов
- Оптимизация изображений и ресурсов

## 10. Безопасность

- Защита от XSS с помощью правильной обработки пользовательского ввода
- Использование HTTPS для всех запросов
- Защита от CSRF с помощью токенов
- Валидация данных на стороне клиента перед отправкой на сервер

## 11. Доступность

- Семантическая HTML-разметка
- ARIA-атрибуты для улучшения доступности
- Достаточный контраст для текста и элементов интерфейса
- Поддержка навигации с клавиатуры

## 12. Тестирование

- Модульное тестирование компонентов с использованием Jest и React Testing Library
- Интеграционное тестирование с использованием Cypress
- Ручное тестирование пользовательских сценариев

## 13. Сборка и развертывание

- Настройка процесса сборки с использованием Vite
- Оптимизация бандла для продакшена
- Настройка CI/CD для автоматической сборки и развертывания
- Интеграция с бэкендом для отдачи статических файлов
